# Installation

- *BIOS* is responsible for detecting the hardware components, configuring the hardware, and starting the operating system.
- Intel developed the *EFI (Extensible Firmware Interface)* successor to BIOS in 1998.
    - Renamed to *UEFI (Unified Extensible Firmware Interface)* after the participation of AMD, Apple, Microsoft, and others.
    - The biggest advantages compared to BIOS is EFI allows you to choose which of several installed operating systems you want to start when you boot the computer.
        - In the BIOS past, the *GRUB (Grand Unified Bootloader)* program is used
    - EFI requires a special partition called the *EFI System Partition (ESP)*
        - The ESP must contain a VFAT file system, which is a Windows 95 compatible file system
            - The partition must be specially marked
            - `/boot/efi`
            - ESP size at least 512 MiB, it is almost impossible to increase the size at a later date
        - [Arch Linux - Unified Extensible Firmware Interface](https://wiki.archlinux.org/title/Unified_Extensible_Firmware_Interface)
        - [Installing Ubuntu in UEFI mode](https://help.ubuntu.com/community/UEFI)
        - [Managing EFI boot loaders for Linux](https://rodsbooks.com/efi-bootloaders/index.html)
- Download ISO images
    - Burn to a DVD (or a USB flash drive) and boot the computer with it
        - to write ISO image to drive use program like [etcher](https://etcher.balena.io) or `dd` command on Linux
    - On a virtual machine, use the ISO image as a virtual DVD drive
- Network installation - the installation files are read from the network
    - Option 1, the installation is started from a USB flash drive, then the installer helps to establish the network connection and then loads all other data from the internet or from the local network
    - Option 2, requires that your computer can load the boot data from the local network, there must be a server on the local network that offers the Linux installer in the form of boot data
        - [FAI - Fully Automatic Installation](https://fai-project.org)
- Cloud installation - the hosting or cloud company will take care the installation, you just select the desired distribution with your configuration (e.g. RAM size, CPU, etc) such as [AWS EC2](https://aws.amazon.com/pm/ec2/), then log in via SSH either using the cloud console or Linux terminal.
- Installation mode
    - Text mode installation
    - Graphics mode installation
    - Live system
- Installation location
    - Linux alone or in parallel with Windows
    - Multiple distributions on one computer?
- Overview of the installation process (with Microsoft Windows already installed)
    - Downsize Windows partition (do it on Windows)
        - Partitions are sections on the SSD or hard disk
        - Different operating systems often use different file systems - that is, different methods of storing files within the partition
        - Methods for managing partitioning information on an SSD or hard disk
            - **GPT (GUID partition tables)** - used in internal SSDs and hard disks since 2012            
                - with [GPT](https://en.wikipedia.org/wiki/GUID_Partition_Table), each partition is identified by a *GUID (Globally Unique Identifier)*
                - all partitions are equal, there is no distinction between primary, extended, and logical partitions
                - each partition can be up to 8 zettabytes (ZiB) in size (about a billion TiB)
                - the partition numbers do not have to match the actual order of the partitions
            - **MBR (Master Boot Record)** - is outdated but still used today, mainly in virtual machines with disks smaller than 2TiB and with external disks
                - intended for disks up to a maximum of 2 TiB
                - three types of partitions
                    - primary
                    - extended
                    - logical
                - a maximum of four primary partitions can exist on the hard disk
                - it is also possible to define an extended partition instead of one of these four primary partitions
                    - inside the extended partition, we can create multiple logical partitions
                    - an extended partition serves only as a container for logical partitions
                        - only primary and logical partitions are suitable for the actual storage of data
            - Partition names
                - Windows - `A:`, `B:`, `C:`, etc
                - Linux - `/dev/sda1`, `/dev/sda2`, `/dev/sdb1`, `/dev/nvme0n1p1`, etc
                    - Hard disks and SATA SSDs - `/dev/sda`, `/dev/sdb`
                    - NVMe interface - `/dev/nvme`
                    - GPT
                        - All partitions are simply numbered in sequence
                    - MBR
                        - The numbers from 1 to 4 are reserved for primary and extended partitions
                            - Logical partitions always start with the number 5
            - File systems
                - partitioning only reserves space on the SSD or hard disk
                - you must create a so-called file system before you can store files in a partition
                - creating a file system in a partition is also called formatting
                - Windows: NTFS, VFAT, exFAT
                - Linux: ext4, btrfs, xfs
            - **LVM (Logical Volume Manager)** - LVM puts a logical layer between partitions and file systems
                - you can create, resize, and shrink virtual partitions (logical volumes) in the section managed by LVM at runtime
                - you can increase the existing LVM storage pool at any time by installing another hard disk or SSD
                - you can also combine sections of multiple disks into a single, huge storage pool
                - you can create snapshots
                - in LVM, 3 levels between the hard disk and the file system
                    - *Physical Volume*
                        - a physical volume is usually a partition of the hard disk or SSD managed by the LVM
                        - for the partition to be used as a physical volume, it must be specially marked
                    - *Volume Group*
                        - one or more physical volumes can be combined into a group
                            - it is possible to virtually concatenate partitions of different hard disks
                        - represents a kind of storage pool that combines all available physical storage media
                        - can be expanded later with additional physical volumes if necessary                        
                    - *Logical Volume*
                        - part of the volume group
                        - for the user, a logical volume acts like a virtual partition
                        - the file system is created in the logical volume
                        - possible to enlarge it provided there is still free space in the storage pool (i.e., the volume group)
                - LVM vs Encryption
                    - Most encryption systems are based on the fact that the file system is addressed not directly, but via an intermediate layer that is responsible for encryption (similar to how LVM works)
                    - Many installation programs therefore offer encryption functions only in combination with LVM
                        - behind the scenes, not a single file system, but the entire LVM layer is encrypted
        - Partition sizes
            - `/` - the system partition, also known as the root partition
            - `/home` - for your own data if needed
            - `/boot` - since EFI and GRUB2 boot loader, the boot files can be read directly from the system partition even in complex LVM and RAID setups, a separate boot partition is then actually superfluous
                - should be around 1 GiB in size if you dediced to have one                
            - swap - same as Windows swap file
                - if there isn't enough RAM available on Linux, it stores some of the RAM content that isn't required in that partition
                - the swap partition doesn't get a name (no mount point)
                - speed advantage over swap file
                - 2 GiB of space for the swap partition is sufficient in almost all cases
                - more and more installations are completely abandoning the swap partition
            - EFI partition
                - on EFI systems, there must be at least one ESP
                - all operating systems share the common EFI partition
                - must contain a VFAT system, `/boot/efi`
                - at least 512 MiB in size
        - File systems
            - Linux supports a lot of different file systems, including `ext4`, `btrfs`, and `xfs`.
            - `ext4`
              - most popular file system
            - `xfs`
              - default file system for RHEL
              - especially well suited for servers with multiple-TiB-sized file systems
            - `btrfs`
              - more features than any other Linux file system
              - many features complicate the administration
              - Fedora and SUSE use as the default file system for the system partition
    - Prepare USB flash drive (copy the ISO image)
    - Start Linux installation
    - Create Linux partitions
    - Select installation scope
    - Configuration
    - Setup boot loader (mostly GRUB) - responsible for starting Linux
        - For EFI machines, the boot loader is installed in a directory of the ESP